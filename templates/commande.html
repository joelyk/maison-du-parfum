{% extends "base.html" %}

{% block title %}Commande - La Maison du Parfum{% endblock %}

{% block content %}
<section class="section">
    <div class="container">
        <h2 class="section-title">Finaliser votre commande</h2>

        <form action="{{ url_for('traiter_commande') }}" method="post" class="checkout-form">
            <!-- Infos client -->
            <div class="form-section">
                <h2>Vos informations</h2>

                <div class="form-group">
                    <label for="prenom">Prénom</label>
                    <input type="text" id="prenom" name="prenom" required>
                </div>

                <div class="form-group">
                    <label for="nom">Nom</label>
                    <input type="text" id="nom" name="nom" required>
                </div>

                <div class="form-group">
                    <label for="email">E-mail</label>
                    <input type="email" id="email" name="email" required>
                </div>

                <div class="form-group">
                    <label for="telephone">Téléphone</label>
                    <input type="text" id="telephone" name="telephone" required>
                </div>

                <div class="form-group">
                    <label for="adresse">Adresse</label>
                    <input type="text" id="adresse" name="adresse" required>
                </div>

                <div class="form-group">
                    <label for="ville">Ville</label>
                    <input type="text" id="ville" name="ville" required>
                </div>

                <div class="form-group">
                    <label for="code_postal">Code postal</label>
                    <input type="text" id="code_postal" name="code_postal" required>
                </div>

                <div class="form-group">
                    <label for="pays">Pays</label>
                    <input type="text" id="pays" name="pays" required>
                </div>
            </div>

            <!-- Récap commande -->
            <div class="form-section">
                <h2>Récapitulatif</h2>

                {% for item in panier %}
                <div class="summary-row">
                    <span>{{ item.nom }} x {{ item.quantite }}</span>
                    <span>{{ "%.2f"|format(item.sous_total) }} €</span>
                </div>
                {% endfor %}

                <div class="summary-total">
                    <span>Total</span>
                    <span>{{ "%.2f"|format(total) }} €</span>
                </div>

                <p style="margin-top:1.5rem; font-size:0.9rem;">
                    <strong>Paiement :</strong> (intégration Stripe / PayPal à venir).  
                    Pour l’instant, cette étape enregistre la commande dans le système.
                </p>

                <button type="submit" class="btn btn-primary" style="margin-top:1.5rem;">
                    Confirmer la commande
                </button>
            </div>
        </form>
    </div>
</section>
{% endblock %}
